<!DOCTYPE html>
<html lang="fr-CA">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title id="page-title">Blog Post | SN Pest Control Montreal</title>
    <meta name="description" id="page-description" content="Expert pest control advice from SN Pest Control Montreal">
    <meta name="keywords" id="page-keywords" content="pest control, Montreal, extermination">
    
    <link rel="canonical" id="page-canonical" href="https://www.silvernestpestcontrol.com/blog/">
    <link rel="stylesheet" href="../styles.css">
    
    <style>
        .blog-post-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .blog-post-header {
            margin-bottom: 2rem;
        }
        
        .blog-post-date {
            color: var(--color-text-muted);
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }
        
        .blog-post-title {
            font-size: 2.5rem;
            color: var(--color-primary);
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        
        .blog-post-author {
            color: var(--color-text-muted);
            font-style: italic;
            margin-bottom: 2rem;
        }
        
        .blog-post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: var(--radius-md);
            margin-bottom: 2rem;
        }
        
        .blog-post-content {
            font-size: 1.125rem;
            line-height: 1.8;
            color: var(--color-text);
        }
        
        .blog-post-content h2 {
            color: var(--color-primary);
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-size: 1.875rem;
        }
        
        .blog-post-content h3 {
            color: var(--color-primary);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.5rem;
        }
        
        .blog-post-content p {
            margin-bottom: 1.5rem;
        }
        
        .blog-post-content ul, .blog-post-content ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }
        
        .blog-post-content li {
            margin-bottom: 0.5rem;
        }
        
        .blog-post-content a {
            color: var(--color-primary);
            text-decoration: underline;
        }
        
        .blog-post-content a:hover {
            color: var(--color-primary-hover);
        }
        
        .back-to-blog {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 2rem;
        }
        
        .back-to-blog:hover {
            color: var(--color-primary-hover);
        }
        
        .blog-cta {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: white;
            padding: 2rem;
            border-radius: var(--radius-md);
            text-align: center;
            margin-top: 3rem;
        }
        
        .blog-cta h3 {
            margin-bottom: 1rem;
        }
        
        .blog-cta .btn {
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <!-- Language Toggle -->
    <div class="language-dropdown">
        <select class="language-select" onchange="changeLanguage(this.value)">
            <option value="en">English</option>
            <option value="fr" selected>Français</option>
        </select>
    </div>
    
    <!-- Skip Link -->
    <a href="#main-content" class="skip-link" data-en="Skip to main content" data-fr="Aller au contenu principal">Aller au contenu principal</a>
    
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <nav class="nav" role="navigation" aria-label="Navigation principale">
                <a href="../index.html" class="logo-link" aria-label="SN Pest Control Accueil">
                    <img src="../images/logo.png" alt="SN Pest Control Montréal" width="200" height="80" class="logo">
                </a>
                
                <button class="hamburger" aria-label="Basculer le menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <div class="nav-links">
                    <a href="../index.html#services" data-en="Services" data-fr="Services">Services</a>
                    <a href="../index.html#process" data-en="Our Process" data-fr="Notre Processus">Notre Processus</a>
                    <a href="../index.html#areas" data-en="Service Areas" data-fr="Secteurs Desservis">Secteurs Desservis</a>
                    <a href="/blog/" data-en="Blog" data-fr="Blog">Blog</a>
                    <a href="../index.html#contact" data-en="Contact" data-fr="Contact">Contact</a>
                    <a href="tel:+15145824400" class="btn btn-secondary btn-small" data-en="Call (514) 582-4400" data-fr="Appelez (514) 582-4400">Appelez (514) 582-4400</a>
                </div>
            </nav>
        </div>
        
        <div class="emergency-bar" role="alert">
            <div class="container">
                <strong data-en="24/7 Emergency Service Available" data-fr="Service d'Urgence 24/7 Disponible">Service d'Urgence 24/7 Disponible</strong> – <span data-en="Call" data-fr="Appelez">Appelez</span> <a href="tel:+15145824400">(514) 582-4400</a>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main id="main-content">
        <section class="section">
            <div class="container">
                <div class="blog-post-container">
                    <a href="/blog/" class="back-to-blog">
                        <span>←</span>
                        <span data-en="Back to Blog" data-fr="Retour au Blog">Retour au Blog</span>
                    </a>
                    
                    <div id="blog-post-content">
                        <p data-en="Loading post..." data-fr="Chargement de l'article...">Chargement de l'article...</p>
                    </div>
                    
                    <div class="blog-cta">
                        <h3 data-en="Need Pest Control Services?" data-fr="Besoin de Services de Contrôle Parasitaire?">Besoin de Services de Contrôle Parasitaire?</h3>
                        <p data-en="Contact SN Pest Control today for expert extermination services in Montreal" data-fr="Contactez SN Pest Control aujourd'hui pour des services d'extermination experts à Montréal">Contactez SN Pest Control aujourd'hui pour des services d'extermination experts à Montréal</p>
                        <a href="tel:+15145824400" class="btn btn-primary" data-en="Call (514) 582-4400" data-fr="Appelez (514) 582-4400">Appelez (514) 582-4400</a>
                        <a href="../quote-calculator.html" class="btn btn-secondary" data-en="Get a Quote" data-fr="Obtenir une Soumission">Obtenir une Soumission</a>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-about">
                    <img src="../images/logo.png" alt="SN Pest Control" width="180" height="72" class="footer-logo">
                    <p data-en="Montreal's trusted pest control experts since 2020." data-fr="Experts en contrôle parasitaire de confiance de Montréal depuis 2020.">Experts en contrôle parasitaire de confiance de Montréal depuis 2020.</p>
                </div>
                
                <div class="footer-links">
                    <h3 data-en="Quick Links" data-fr="Liens Rapides">Liens Rapides</h3>
                    <ul>
                        <li><a href="../index.html#services" data-en="Our Services" data-fr="Nos Services">Nos Services</a></li>
                        <li><a href="../index.html#contact" data-en="Contact" data-fr="Contact">Contact</a></li>
                        <li><a href="/blog/" data-en="Blog" data-fr="Blog">Blog</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p data-en="&copy; 2025 SN Pest Control Montreal. All rights reserved." data-fr="&copy; 2025 SN Pest Control Montréal. Tous droits réservés.">&copy; 2025 SN Pest Control Montréal. Tous droits réservés.</p>
            </div>
        </div>
    </footer>
    
    <script src="../hamburger.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        let currentLanguage = 'fr';
        let currentPost = null;
        
        function changeLanguage(newLanguage) {
            currentLanguage = newLanguage;
            updateLanguage();
            if (currentPost) {
                renderPost(currentPost);
            }
        }
        
        function updateLanguage() {
            document.querySelectorAll('[data-en]').forEach((element) => {
                if (element.dataset[currentLanguage]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = element.dataset[currentLanguage];
                    } else {
                        element.textContent = element.dataset[currentLanguage];
                    }
                }
            });
            
            const languageSelect = document.querySelector('.language-select');
            if (languageSelect) {
                languageSelect.value = currentLanguage;
            }
        }
        
        async function loadBlogPost() {
            const urlParams = new URLSearchParams(window.location.search);
            const slug = urlParams.get('slug');
            
            if (!slug) {
                document.getElementById('blog-post-content').innerHTML = 
                    '<p>Post not found. <a href="index.html">Return to blog</a></p>';
                return;
            }
            
            try {
                const response = await fetch(`https://api.github.com/repos/Niaz-Ul-Haque/sn-pest-friend/contents/_posts/${slug}.md`);
                const file = await response.json();
                const contentResponse = await fetch(file.download_url);
                const content = await contentResponse.text();
                
                currentPost = parseMarkdownPost(content);
                renderPost(currentPost);
                
            } catch (error) {
                console.error('Error loading post:', error);
                document.getElementById('blog-post-content').innerHTML = 
                    '<p>Error loading post. <a href="index.html">Return to blog</a></p>';
            }
        }
        
        function parseMarkdownPost(content) {
            const frontmatterRegex = /^---\s*\n([\s\S]*?)\n---/;
            const match = content.match(frontmatterRegex);
            
            if (!match) return null;
            
            const frontmatter = match[1];
            const body = content.replace(frontmatterRegex, '').trim();
            
            const post = { body };
            
            const lines = frontmatter.split('\n');
            lines.forEach(line => {
                const colonIndex = line.indexOf(':');
                if (colonIndex > -1) {
                    const key = line.substring(0, colonIndex).trim();
                    let value = line.substring(colonIndex + 1).trim();
                    
                    if (value.startsWith('"') && value.endsWith('"')) {
                        value = value.slice(1, -1);
                    }
                    if (value.startsWith("'") && value.endsWith("'")) {
                        value = value.slice(1, -1);
                    }
                    
                    post[key] = value;
                }
            });
            
            return post;
        }
        
        function renderPost(post) {
            const title = post[`title_${currentLanguage}`] || post.title_en || 'Untitled';
            const date = new Date(post.date).toLocaleDateString(currentLanguage === 'fr' ? 'fr-CA' : 'en-CA', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            const author = post.author || 'SN Pest Control';
            const image = post.featured_image || '';
            
            // Split body by language separator if it exists
            let bodyContent = post.body;
            const parts = bodyContent.split('---');
            if (parts.length > 1 && currentLanguage === 'fr' && parts[1]) {
                bodyContent = parts[1];
            } else if (parts.length > 0) {
                bodyContent = parts[0];
            }
            
            const htmlContent = marked.parse(bodyContent);
            
            document.getElementById('page-title').textContent = `${title} | SN Pest Control`;
            document.getElementById('page-description').setAttribute('content', post[`excerpt_${currentLanguage}`] || post.excerpt_en || '');
            
            document.getElementById('blog-post-content').innerHTML = `
                <div class="blog-post-header">
                    <div class="blog-post-date">${date}</div>
                    <h1 class="blog-post-title">${title}</h1>
                    <div class="blog-post-author">${currentLanguage === 'en' ? 'By' : 'Par'} ${author}</div>
                </div>
                ${image ? `<img src="${image}" alt="${title}" class="blog-post-image" onerror="this.style.display='none'">` : ''}
                <div class="blog-post-content">
                    ${htmlContent}
                </div>
            `;
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const languageSelect = document.querySelector('.language-select');
            if (languageSelect) {
                languageSelect.value = currentLanguage;
            }
            loadBlogPost();
        });
    </script>
</body>
</html>
